# Cloudflare Workers Configuration
name = "nexus-api"
main = "src/index.ts"
compatibility_date = "2024-02-10"

# Environment variables (non-sensitive)
[vars]
ENVIRONMENT = "production"
API_VERSION = "v1"
CORS_ORIGIN = "*"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "nexus-production"
database_id = "<your-database-id-here>"  # Replace after running: wrangler d1 create nexus-production

# KV Namespace for caching (optional, for future use)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "<your-kv-namespace-id>"

# Rate limiting (Cloudflare native)
[limits]
# 1000 requests per 10 minutes per IP
requests_per_minute = 100

# Environment-specific overrides
[env.development]
name = "nexus-api-dev"
vars = { ENVIRONMENT = "development", CORS_ORIGIN = "http://localhost:3000" }

[env.staging]
name = "nexus-api-staging"
vars = { ENVIRONMENT = "staging" }
